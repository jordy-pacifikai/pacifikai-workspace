<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fiche Recherche - {{COMPANY}}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366F1;
            --primary-dark: #4F46E5;
            --primary-light: #818CF8;
            --accent: #10B981;
            --accent-dark: #059669;
            --warning: #F59E0B;
            --danger: #EF4444;
            --bg-dark: #0F172A;
            --bg-card: #1E293B;
            --bg-surface: #334155;
            --text-primary: #F8FAFC;
            --text-secondary: #94A3B8;
            --text-muted: #64748B;
            --border: #475569;
            --gradient-primary: linear-gradient(135deg, #6366F1 0%, #8B5CF6 50%, #A855F7 100%);
            --gradient-accent: linear-gradient(135deg, #10B981 0%, #06B6D4 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: var(--gradient-primary);
            padding: 60px 40px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            pointer-events: none;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 20px;
        }

        .badge svg {
            width: 16px;
            height: 16px;
        }

        .company-name {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 8px;
            letter-spacing: -1px;
        }

        .company-sector {
            font-size: 20px;
            opacity: 0.9;
            font-weight: 400;
        }

        .header-meta {
            display: flex;
            gap: 30px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            opacity: 0.85;
        }

        .meta-item svg {
            width: 18px;
            height: 18px;
            opacity: 0.7;
        }

        /* Main Content */
        .main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px;
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 40px;
            flex-wrap: wrap;
            background: var(--bg-card);
            padding: 8px;
            border-radius: 16px;
        }

        .nav-tab {
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            background: transparent;
        }

        .nav-tab:hover {
            color: var(--text-primary);
            background: var(--bg-surface);
        }

        .nav-tab.active {
            background: var(--gradient-primary);
            color: white;
        }

        /* Sections */
        .section {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 24px;
            border: 1px solid var(--border);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .section-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--gradient-primary);
        }

        .section-icon svg {
            width: 24px;
            height: 24px;
            color: white;
        }

        .section-title {
            font-size: 24px;
            font-weight: 600;
        }

        .section-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        /* Pain Points */
        .pain-point {
            background: var(--bg-surface);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 16px;
            border-left: 4px solid var(--danger);
        }

        .pain-point.critical {
            border-left-color: var(--danger);
        }

        .pain-point.important {
            border-left-color: var(--warning);
        }

        .pain-point-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .pain-point-number {
            width: 28px;
            height: 28px;
            border-radius: 8px;
            background: var(--danger);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
        }

        .pain-point.important .pain-point-number {
            background: var(--warning);
        }

        .pain-point-title {
            font-size: 18px;
            font-weight: 600;
        }

        .pain-point blockquote {
            background: rgba(0,0,0,0.2);
            border-radius: 12px;
            padding: 16px 20px;
            margin-top: 12px;
            font-style: italic;
            color: var(--text-secondary);
            border-left: 3px solid var(--primary);
        }

        /* Features Table */
        .features-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 8px;
        }

        .features-table th {
            text-align: left;
            padding: 12px 16px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
        }

        .features-table td {
            padding: 16px;
            background: var(--bg-surface);
            font-size: 14px;
        }

        .features-table tr td:first-child {
            border-radius: 12px 0 0 12px;
            font-weight: 600;
        }

        .features-table tr td:last-child {
            border-radius: 0 12px 12px 0;
        }

        .impact-high {
            color: var(--accent);
        }

        .impact-medium {
            color: var(--warning);
        }

        /* Feature Cards */
        .feature-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 32px;
        }

        .feature-card {
            background: var(--bg-surface);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border);
            transition: all 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-4px);
            border-color: var(--primary);
        }

        .feature-card-rank {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: var(--gradient-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 18px;
            margin-bottom: 16px;
        }

        .feature-card h4 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .feature-card p {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 16px;
        }

        .feature-card-stats {
            display: flex;
            gap: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border);
        }

        .feature-stat {
            flex: 1;
        }

        .feature-stat-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .feature-stat-value {
            font-size: 16px;
            font-weight: 600;
            color: var(--accent);
        }

        /* Case Studies */
        .case-study {
            background: var(--bg-surface);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 16px;
        }

        .case-study-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 16px;
        }

        .case-study-title {
            font-size: 18px;
            font-weight: 600;
        }

        .case-study-badge {
            background: var(--gradient-accent);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .case-study-metrics {
            display: flex;
            gap: 24px;
            margin: 20px 0;
        }

        .metric {
            text-align: center;
        }

        .metric-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--accent);
        }

        .metric-label {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .case-study blockquote {
            background: rgba(0,0,0,0.2);
            border-radius: 12px;
            padding: 16px 20px;
            font-style: italic;
            color: var(--text-secondary);
            border-left: 3px solid var(--accent);
        }

        /* ROI Section */
        .roi-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .roi-card {
            background: var(--bg-surface);
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .roi-card.recommended {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(99,102,241,0.1) 0%, rgba(139,92,246,0.1) 100%);
        }

        .roi-card-badge {
            background: var(--gradient-primary);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: inline-block;
            margin-bottom: 16px;
        }

        .roi-card h4 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .roi-card-price {
            font-size: 36px;
            font-weight: 700;
            color: var(--primary-light);
            margin: 16px 0;
        }

        .roi-card-price span {
            font-size: 16px;
            font-weight: 400;
            color: var(--text-muted);
        }

        .roi-card ul {
            list-style: none;
            text-align: left;
            margin-top: 20px;
        }

        .roi-card li {
            padding: 8px 0;
            font-size: 14px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .roi-card li svg {
            width: 18px;
            height: 18px;
            color: var(--accent);
            flex-shrink: 0;
        }

        /* Scripts Section */
        .script-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
        }

        .script-tab {
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 500;
            background: var(--bg-surface);
            color: var(--text-secondary);
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }

        .script-tab.active {
            background: var(--primary);
            color: white;
        }

        .script-content {
            background: var(--bg-surface);
            border-radius: 16px;
            padding: 24px;
        }

        .script-block {
            margin-bottom: 24px;
        }

        .script-block:last-child {
            margin-bottom: 0;
        }

        .script-block h4 {
            font-size: 14px;
            font-weight: 600;
            color: var(--primary-light);
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .script-text {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            padding: 20px;
            font-size: 15px;
            line-height: 1.8;
            color: var(--text-primary);
        }

        /* Markdown Content Styling */
        .markdown-content h1 {
            font-size: 28px;
            font-weight: 700;
            margin: 32px 0 16px;
            color: var(--text-primary);
        }

        .markdown-content h2 {
            font-size: 22px;
            font-weight: 600;
            margin: 28px 0 14px;
            color: var(--primary-light);
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
        }

        .markdown-content h3 {
            font-size: 18px;
            font-weight: 600;
            margin: 24px 0 12px;
            color: var(--text-primary);
        }

        .markdown-content p {
            margin-bottom: 16px;
            color: var(--text-secondary);
        }

        .markdown-content ul, .markdown-content ol {
            margin: 16px 0;
            padding-left: 24px;
        }

        .markdown-content li {
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .markdown-content blockquote {
            background: rgba(99,102,241,0.1);
            border-left: 4px solid var(--primary);
            padding: 16px 20px;
            margin: 20px 0;
            border-radius: 0 12px 12px 0;
            font-style: italic;
        }

        .markdown-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .markdown-content th, .markdown-content td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .markdown-content th {
            background: var(--bg-surface);
            font-weight: 600;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
        }

        .markdown-content code {
            background: var(--bg-surface);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 14px;
            color: var(--primary-light);
        }

        .markdown-content strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        /* Footer */
        .footer {
            background: var(--bg-card);
            padding: 40px;
            margin-top: 40px;
            text-align: center;
            border-top: 1px solid var(--border);
        }

        .footer-logo {
            font-size: 24px;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
        }

        .footer-text {
            color: var(--text-muted);
            font-size: 14px;
        }

        /* Actions Bar */
        .actions-bar {
            position: fixed;
            bottom: 24px;
            right: 24px;
            display: flex;
            gap: 12px;
            z-index: 100;
        }

        .action-btn {
            padding: 14px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .action-btn svg {
            width: 18px;
            height: 18px;
        }

        .action-btn.primary {
            background: var(--gradient-primary);
            color: white;
        }

        .action-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(99,102,241,0.4);
        }

        .action-btn.secondary {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .action-btn.secondary:hover {
            background: var(--bg-surface);
        }

        /* Print Styles */
        @media print {
            body {
                background: white;
                color: #1a1a1a;
            }
            .header {
                background: #6366F1;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            .actions-bar {
                display: none;
            }
            .section {
                break-inside: avoid;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 40px 20px;
            }
            .company-name {
                font-size: 32px;
            }
            .main {
                padding: 20px;
            }
            .roi-grid {
                grid-template-columns: 1fr;
            }
            .feature-cards {
                grid-template-columns: 1fr;
            }
            .actions-bar {
                bottom: 16px;
                right: 16px;
                left: 16px;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="badge">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/></svg>
                Deep Research AI
            </div>
            <h1 class="company-name">{{COMPANY}}</h1>
            <p class="company-sector">{{SECTOR}}</p>
            <div class="header-meta">
                <div class="meta-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                    {{DATE}}
                </div>
                <div class="meta-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    {{GENERATION_TIME}}
                </div>
                <div class="meta-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/></svg>
                    {{SOURCES_COUNT}} sources analysees
                </div>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="section">
            <div class="markdown-content">
                {{CONTENT}}
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-logo">PACIFIK'AI</div>
        <p class="footer-text">Fiche generee automatiquement par Deep Research Agent | Tavily + Claude</p>
    </footer>

    <div class="actions-bar">
        <button class="action-btn secondary" onclick="window.print()">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/></svg>
            Imprimer / PDF
        </button>
        <button class="action-btn primary" onclick="copyToClipboard()">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"/></svg>
            Copier
        </button>
    </div>

    <script>
        // Convert markdown to basic HTML
        function markdownToHtml(markdown) {
            if (!markdown) return '';

            let html = markdown
                // Headers
                .replace(/^### (.*$)/gim, '<h3>$1</h3>')
                .replace(/^## (.*$)/gim, '<h2>$1</h2>')
                .replace(/^# (.*$)/gim, '<h1>$1</h1>')
                // Bold
                .replace(/\*\*(.*?)\*\*/gim, '<strong>$1</strong>')
                // Italic
                .replace(/\*(.*?)\*/gim, '<em>$1</em>')
                // Blockquotes
                .replace(/^\> (.*$)/gim, '<blockquote>$1</blockquote>')
                // Code
                .replace(/`(.*?)`/gim, '<code>$1</code>')
                // Lists
                .replace(/^\- (.*$)/gim, '<li>$1</li>')
                .replace(/^\d+\. (.*$)/gim, '<li>$1</li>')
                // Line breaks
                .replace(/\n\n/gim, '</p><p>')
                .replace(/\n/gim, '<br>');

            // Wrap in paragraphs
            html = '<p>' + html + '</p>';

            // Fix list items
            html = html.replace(/<\/li><br><li>/g, '</li><li>');
            html = html.replace(/<p><li>/g, '<ul><li>');
            html = html.replace(/<\/li><\/p>/g, '</li></ul>');

            // Fix consecutive blockquotes
            html = html.replace(/<\/blockquote><br><blockquote>/g, '</blockquote><blockquote>');

            return html;
        }

        function copyToClipboard() {
            const content = document.querySelector('.markdown-content').innerText;
            navigator.clipboard.writeText(content).then(() => {
                const btn = document.querySelector('.action-btn.primary');
                btn.innerHTML = '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg> Copie!';
                setTimeout(() => {
                    btn.innerHTML = '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"/></svg> Copier';
                }, 2000);
            });
        }

        // Initialize content if markdown variable is set
        document.addEventListener('DOMContentLoaded', function() {
            const content = document.querySelector('.markdown-content');
            if (content && content.innerHTML.includes('{{CONTENT}}')) {
                // Content will be replaced server-side
            }
        });
    </script>
</body>
</html>
